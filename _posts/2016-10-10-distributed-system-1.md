### CAP 理论


Consistency, Availability 和 Partition tolerance

**Consistency**

一致性是指数据在多个副本之间是否能够保持一致的特性。在一致性的需求下, 当一个系统在数据一致的状态下
执行更新操作后, 应该保证系统的数据仍然处于一致的状态。

对于一个将数据副本分布在不同分布式节点上的系统来说, 如果对第一个节点的数据进行了更新操作并且更新成功糊, 
却没有使得第二个节点的数据得到相应的更新, 于是在对第二个节点的数据进行读取操作时, 获取的依然是老数据(或称为
脏数据), 这就是典型的分布式数据不一致的情况。在分布式系统中, 如果能够做到针对一个数据项的跟新执行成功
以后, 所有的用户可以读取其最新的值, 那么这样的系统就被认为具有强一致性。

**Availability**

系统提供的服务必须一直处于可用状态, 对于用户的每一个操作请求总是能够在有限的时间内返回结果。

**分区容错性**

分区容错性约束了一个分布式系统需要具有如下的特性, 分布式系统在遇到任何网络分区故障的时候, 仍然需要保证
对外提供满足一致性和可用性的服务, 除非是整个网络环境都发生了故障。

### 放弃部分特性

**放弃 P**

如果希望能够避免系统出现的分区容错性的问题, 一种较为简单的做法是将所有的数据都放在一个节点上。放弃了 P 也就放弃了
系统的可扩展性

**放弃 A**

一旦发生网络分区或者其他故障, 那么受影响的服务需要等待一段时间, 因此在等待期间系统无法对外提供正常的服务, 即不可用

**放弃 C**

放弃强一致性, 而保留数据的最终一致性。

**最终一致性**

系统的所有副本, 在经历一段时间的同步后, 最终能够达到一个一致的状态。因此, 最终一致性的本质是需要系统保证
最终数据能够达到一直, 而不要实时保证系统的强一致性。

**2 PC 和 3 PC**

